#高级数据库管理
本文为 ![django book](http://djangobook.com/advanced-database-management/)一书的翻译.

本章为Django中的关系型数据库提供了一些额外的信息, 同时也为连接遗留数据库提供了一些笔记,要点和窍门.

##一般性说明
Django视图为所有的数据库后端提供尽可能多的功能. 然而, 不是所有的数据库后端都是相似的, Django开发者不得不做一些设计方案,
以决定支持哪些功能, 保证哪些方式是安全的.

这个文档对Django一些功能的相关用法进行说明. 当然, 这个文档并不能取代特定的服务器文档或者参考手册.

###持久连接
持久连接避免了每次请求时都要重新建立一个连接的额外开销. **CONN_MAX_AGE** 参数决定了一次连接的最大生命周期. 因此,这个参数
控制着持久连接. 每个数据库都可以单独设置这个参数. **CONN_MAX_AGE** 参数的默认值为 0, 在每次请求结束时都会关闭数据库连接. 
想要能够持久连接, 把**CONN_MAX_AGE**参数设置为以秒为单位的正数即可. 想要无限期持久连接, 将它设置为 None.


###连接管理
第一次查询时, Django会打开一个通往数据库的连接. 在随后的请求中,它会保持连接是打开的,并且重复使用连接. 一旦超过**CONN_MAX_AGE**
参数所设置的最大生命周期的值, 或者不再请求后, Django将会关闭这个连接.

从细节上讲,无论Django是否需要一个或者已经失去一个连接, Django都会自动打开一个通往数据库的连接--要么因为这是第一次连接, 要么因为
之前的连接被关闭.

在每次请求的开始时, 如果它已经达到最大生命周期的值, Django会关闭连接. 如果你的数据库终端在连接一段时间后不再连接, 你应该将
**CONN_MAX_AGE**设置为一个更小的值, 以便Django不再试图使用一个应经被数据库服务器关闭的连接.(这个问题仅会影响业务量非常
的站点.)

